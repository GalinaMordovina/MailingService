# –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏ (Django)
 
–¶–µ–ª—å: —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏, –∫–ª–∏–µ–Ω—Ç–∞–º–∏, —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ email-—Ä–∞—Å—Å—ã–ª–∫–∞–º–∏.  
–ß—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∞ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞, –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á APScheduler, –∫–∞—Å—Ç–æ–º–Ω—ã–µ Django-–∫–æ–º–∞–Ω–¥—ã, –∞ —Ç–∞–∫–∂–µ —Å–æ–±–∏—Ä–∞–ª–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –ø–æ–ø—ã—Ç–∫–∞–º –æ—Ç–ø—Ä–∞–≤–∫–∏.

## üöÄ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –ø—Ä–æ—Ñ–∏–ª—å.
- –ö–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å `CustomUser` —Å email-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π.
- –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Ç Django `AbstractUser`.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–≤, —Ç–µ–ª–µ—Ñ–æ–Ω–∞, —Å—Ç—Ä–∞–Ω—ã.
- –†–æ–ª—å **–ú–µ–Ω–µ–¥–∂–µ—Ä** (–≥—Ä—É–ø–ø–∞ ¬´–ú–µ–Ω–µ–¥–∂–µ—Ä—ã¬ª) —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏.
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### –ö–ª–∏–µ–Ω—Ç—ã
- –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤.
- –ö–∞–∂–¥—ã–π –∫–ª–∏–µ–Ω—Ç –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≤–ª–∞–¥–µ–ª—å—Ü—É.
- –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –≤–∏–¥—è—Ç **–≤—Å–µ—Ö** –∫–ª–∏–µ–Ω—Ç–æ–≤.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏—Ö.
- –î–æ–±–∞–≤–ª–µ–Ω–æ –∫–∞—Å—Ç–æ–º–Ω–æ–µ –ø—Ä–∞–≤–æ `can_view_all_clients`.

### –°–æ–æ–±—â–µ–Ω–∏—è
- –®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º (—Ç–µ–º–∞ + —Ç–µ–ª–æ).
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –≤–ª–∞–¥–µ–ª—å—Ü—É.
- –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –≤–∏–¥—è—Ç –≤—Å–µ.
- –ö–∞—Å—Ç–æ–º–Ω–æ–µ –ø—Ä–∞–≤–æ `can_view_all_messages`.

### –†–∞—Å—Å—ã–ª–∫–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ —Ä–∞—Å—Å—ã–ª–∫–∏.
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—é –∏ —Å–ø–∏—Å–∫—É –∫–ª–∏–µ–Ω—Ç–æ–≤.
- –ü–æ–ª–µ `is_active` ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª—é—á–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É.
- –ö–Ω–æ–ø–∫–∞ —Ä—É—á–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏.
- –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –≤–∏–¥—è—Ç –≤—Å–µ —Ä–∞—Å—Å—ã–ª–∫–∏.
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∞–≤–æ: `can_disable_mailings`.

### –ü–æ–ø—ã—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
- –ò—Å—Ç–æ—Ä–∏—è –ø–æ–ø—ã—Ç–æ–∫ (—É—Å–ø–µ—à–Ω–æ/–æ—à–∏–±–∫–∞).
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Ä–∞—Å—Å—ã–ª–∫–∏.
- –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –≤–∏–¥—è—Ç –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏.


---

## –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—Ç–ø—Ä–∞–≤–æ–∫ (APScheduler)

–°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç APScheduler –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º:

- –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (`interval = 60 —Å–µ–∫`)
- –Ω–∞—Ö–æ–¥–∏—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏
- –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∏—Å—å–º–∞ —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –±—ç–∫–µ–Ω–¥ Django
- –ª–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–∞–π–ª `mailings.log`

---

## –ö–∞—Å—Ç–æ–º–Ω—ã–µ Django-–∫–æ–º–∞–Ω–¥—ã

### 1. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞—Å—Å—ã–ª–æ–∫ –≤—Ä—É—á–Ω—É—é
`python manage.py send_mailings`

–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫ –∏ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å–∏ Attempt.

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä—Å–∫–æ–π –≥—Ä—É–ø–ø—ã —Å –ø—Ä–∞–≤–∞–º–∏
`python manage.py create_managers_group`

–°–æ–∑–¥–∞—ë—Ç –≥—Ä—É–ø–ø—É **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã** –∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –µ–π –ø—Ä–∞–≤–∞:
- –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ —Ä–∞—Å—Å—ã–ª–∫–∏
- –æ—Ç–∫–ª—é—á–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫–∏  
(–ø–æ –¢–ó –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è)

---

## –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –Ω–∞ —Ç—Ä—ë—Ö —É—Ä–æ–≤–Ω—è—Ö:

### 1. **–ú–æ–¥–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ Meta**
```python
permissions = (
    ('can_view_all_clients', '–ú–æ–∂–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤'),
)
```
### 2. **–ü—Ä–æ–≤–µ—Ä–∫–∏ –≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è—Ö (views)**

–ú–µ–Ω–µ–¥–∂–µ—Ä –≤–∏–¥–∏—Ç –≤—Å—ë.

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - —Ç–æ–ª—å–∫–æ —Å–≤–æ—ë.

### 3. **–õ–æ–≥–∏–∫–∞ –≤ —à–∞–±–ª–æ–Ω–∞—Ö —á–µ—Ä–µ–∑ custom template tag**
```
{% user_is_manager as is_manager %}
{% if is_manager %}
    –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É
{% endif %}
```
## –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

 - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ email –≤–º–µ—Å—Ç–æ username - –ø–æ–ª–Ω–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Django.

 - –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ DRF - —á–∏—Å—Ç—ã–π Django + –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∞.

 - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç—á—ë—Ç–æ–≤ –≤—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç—É –ø–æ –∞–∫—Ç–∏–≤–Ω—ã–º, –æ—Ç–∫–ª—é—á—ë–Ω–Ω—ã–º –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º —Ä–∞—Å—Å—ã–ª–∫–∞–º.

 - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ `HomeView` - —á—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É.

 - –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ `/media/`.

 - –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ —Ñ–∞–π–ª `mailings.log`.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```
git clone https://github.com/GalinaMordovina/MailingService.git
cd MailingService
```
### 2. –°–æ–∑–¥–∞—Ç—å .env –ø–æ —à–∞–±–ª–æ–Ω—É:
`cp .env.sample .env`
### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
`pip install -r requirements.txt`
### 4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:
`python manage.py migrate`
### 5. –°–æ–∑–¥–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—Å–∫—É—é –≥—Ä—É–ø–ø—É:
`python manage.py create_managers_group`
### 6. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç:
`python manage.py runserver`

### –ê–≤—Ç–æ—Ä: –ì–∞–ª–∏–Ω–∞ –ú–æ—Ä–¥–æ–≤–∏–Ω–∞
#### email: glukoloid@gmail.com